<!-- <h3 class="text-center">
    {{name}}
</h3>

<div>
    {{description}}
</div> -->
<!-- <h3 class="text-center"></h3> -->

<div>
    <button mat-button (click)="editThreatInfo()">
        <mat-icon class="material-symbols-outlined">
            edit
        </mat-icon>
        Edit Threat Information
    </button>
    <button mat-button (click)="deleteThreat()">
        <mat-icon class="material-symbols-outlined">
            delete
        </mat-icon>
        Remove Threat from Project
    </button>
    <button mat-button (click)="addEquipmentStrategy()">
        <mat-icon class="material-symbols-outlined">
            add
        </mat-icon>
        Add Equipment/Resilience Strategies
    </button>
</div>

<h3 class="text-center">
    Resilience Strategies for {{threatName}}
</h3>

@if (dataSource.data.length) {
<div class="table-container">
    <table mat-table [dataSource]="dataSource" matSort>
        <ng-container *ngFor="let col of columns; let i=index" [matColumnDef]="col.id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                {{col.name}}
            </th>
            @if (col.id === 'action') {
                <td mat-cell *matCellDef="let element" class="action-cell">
                    <button mat-icon-button (click)="deleteThreatStrategy(element.id)" matTooltip="Delete the strategy">
                        <mat-icon class="material-symbols-outlined fg-error">
                            delete
                        </mat-icon>
                    </button>
                    <button mat-icon-button [routerLink]="['.', element.id]" matTooltip="Edit the strategy">
                        <mat-icon class="material-symbols-outlined fg-secondary-dark">
                            menu_book
                        </mat-icon>
                    </button>
                </td>
            }
            @else {
                <td mat-cell *matCellDef="let element" [class.select-col]="col.id === 'selection'">
                    @if (col.numberFormat) {
                        {{col.getValue(element) | number:col.numberFormat}}
                    }
                    @else {
                        {{col.getValue(element)}}
                    }
                </td>
            }
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>

        <!-- No data row -->
        <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" [attr.colspan]="displayedColumns.length">
                No data available
            </td>
        </tr>
    </table>

</div>
}
@else {
    <div class="app-info">
        <h3 class="text-center flex-row flex-align-row-items flex-gap">
            <mat-icon class="material-symbols-outlined">
                info_circle
            </mat-icon>
            Add Equipment and Resilience Strategies to the threat.
        </h3>
    </div>
}

<!-- @for (item of data; track item.equipmentId) {
    <div>
        {{item.equipmentId}}
        @for (strategy of item.strategies; track strategy) {
        <div>
            {{strategy.strategyType}}
        </div>
        }
    </div>
} -->
